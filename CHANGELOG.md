# 更新日志

## v2.0.0 - 2025-12-10

### 重大更新：后台管理系统

1. **完整的HTML后台管理系统**
   - 独立的Web后台管理界面
   - 响应式设计，支持PC和移动端访问
   - 现代化UI设计，操作流畅

2. **收费站管理**
   - 添加/编辑/删除收费站
   - 收费站编码和名称管理
   - 收费站与班组的层级关系

3. **班组管理**
   - 添加/编辑/删除收费班组
   - 班组归属收费站
   - 班组编码和名称管理

4. **收费员管理**
   - 添加/编辑/删除收费员
   - 收费员归属班组
   - 工号和姓名管理
   - 自动关联到收费站

5. **监控员管理**
   - 添加/编辑/删除监控员
   - 监控员归属收费站
   - 工号和姓名管理

6. **班次时间设置**
   - 白班时间设置（默认：7:30-15:30）
   - 中班时间设置（默认：15:30-23:30）
   - 夜班时间设置（默认：23:30-7:30）
   - 支持自定义修改时间段
   - 支持跨天班次（如夜班）

7. **记录管理与导出**
   - 查看所有登记记录
   - 搜索和筛选功能
   - 导出Excel格式
   - 导出PDF格式
   - 统计数据展示（总记录、今日、本月）

### 小程序端增强

1. **人员选择优化**
   - 收费员改为下拉选择（从后台数据库读取）
   - 监控员改为下拉选择（从后台数据库读取）
   - 显示工号和姓名信息

2. **班次自动识别**
   - 根据当前时间自动显示班次
   - 支持白班/中班/夜班识别
   - 班次时间可在后台自定义

3. **数据库结构优化**
   - 新增5个后台管理表
   - 完善的关联关系
   - 优化查询性能

### 技术改进

1. **配置脚本**
   - 自动配置后台管理系统
   - 从.env读取Supabase配置
   - 一键部署脚本

2. **API扩展**
   - 新增收费员列表查询API
   - 新增监控员列表查询API
   - 新增班次设置查询API
   - 新增班次自动判断函数

3. **文档完善**
   - 后台管理系统使用说明
   - 数据库表结构文档
   - 部署指南

---

## v1.1.0 - 2025-12-10

### 新增功能

1. **首页拍照功能**
   - 新增独立的拍照按钮，可直接调用摄像头拍照
   - 优化图片选择流程

2. **登记信息页增强**
   - 新增免费原因下拉选择器（紧急车/军警车/应急车/旅游包车）
   - 新增收费员输入框
   - 新增监控员输入框
   - 新增重新识别按钮（替换原空白按钮）
   - 新增自定义返回按钮（左上角"<"图标）

3. **历史记录页交互优化**
   - 支持点击记录查看详情
   - 显示免费原因标签
   - 显示收费员和监控员信息
   - 编辑模式下隐藏图片预览

### 功能优化

1. **应用名称更新**
   - 从"智票通"更名为"免费车登记"
   - 更新所有相关文案和说明

2. **文案优化**
   - 移除所有"票据"相关字样
   - 统一使用"车辆信息"、"登记"等术语
   - 优化用户引导文案

3. **数据库结构**
   - 新增 free_reason 字段（免费原因）
   - 新增 toll_collector 字段（收费员）
   - 新增 monitor 字段（监控员）

### 技术改进

1. **页面配置**
   - 登记信息页使用自定义导航栏
   - 优化页面标题和导航体验

2. **代码质量**
   - 通过所有代码检查
   - 优化类型定义
   - 改进错误处理

---

## v1.0.0 - 2025-12-06

### 初始版本

- 车辆信息识别功能
- 历史记录管理
- 个人中心
- 数据库集成
